ESP32 智慧鬧鐘系統 (Asyncio AIoT Alarm Clock)本專案是一款基於 MicroPython 開發的智慧鬧鐘系統，專為資工系大學部學生設計，旨在展示 非同步程式設計 (uasyncio)、物件導向封裝 以及 多通道通訊 (MQTT & Web) 的整合應用。🚀 核心特色非同步多工處理：採用 uasyncio 驅動，實現同時檢查鬧鐘、更新 OLED、處理 Web 請求與監聽 MQTT 指令，系統不卡頓。雙軌控制架構：提供本地 Web 控制面板與遠端 MQTT 指令集，雙通道同步更新鬧鐘狀態。資料持久化：使用 alarms.json 儲存設定，確保裝置重啟或斷電後，鬧鐘設定不遺失。環境監控：整合 DHT11 溫濕度感測器與 OLED 顯示螢幕，即時監控室內環境。路由裝飾器設計：MQTT 採用類似 Flask 的路由裝飾器 (@router.route)，提升程式碼可讀性與擴展性。🛠 硬體配置 (Pin Map)所有的硬體腳位皆定義於 config.py，方便修改與維護：組件腳位 (GPIO)功能說明Buzzer6鬧鐘響鈴 (PWM)DHT1118溫濕度數據採集Button (Stop)17停止響鈴按鈕Button (Next)21OLED 畫面切換按鈕OLED (I2C)SCL: 7 / SDA: 5128x64 顯示器📂 檔案架構main.py: 系統入口，負責初始化硬體並啟動所有並行任務。config.py: 全域配置檔案，包含 WiFi、MQTT 與硬體腳位。tasks.py: 定義所有非同步任務 (顯示、鬧鐘檢查、MQTT 路由)。hardware/: 硬體抽象層 (HAL)，封裝感測器與輸出設備邏輯。communication/: 通訊模組，處理 WiFi 連線、MQTT 協定與 Web Server。utils/alarm_manager.py: 鬧鐘 CRUD 核心邏輯。🌐 通訊介面1. Web 介面連線至 ESP32 的 IP 地址（預設 Port 80），即可透過視覺化網頁新增或刪除鬧鐘。2. MQTT 指令集系統會訂閱 nuu/csie/{DEVICE_ID}/#。新增鬧鐘: .../alarm_add (Payload: {"h": 8, "m": 30, "days": ["Mon", "Tue"]})。刪除鬧鐘: .../alarm_delete (Payload: {"index": 0})。查詢列表: .../alarm_list。⚠️ 開發者筆記：MQTT 除錯挑戰 (必看)在開發 IoT 系統時，最常遇到「MQTTX 顯示已連線，但 ESP32 卻收不到訊息」的情況。請務必檢查以下重點：Client ID 唯一性：MQTT Broker 會踢掉相同 ID 的連線。請確認 config.py 中的 DEVICE_ID 是唯一的。Topic 嚴格對比：注意 Topic 前後是否有不必要的空格或 / 符號。系統採用 config.py 定義的 Prefix。JSON 格式錯誤：發送指令時，請確保 Payload 為標準 JSON 格式。本系統包含 [Debug RAW] 紀錄功能，可查看原始封包內容進行除錯。非同步阻塞：若在任務中使用 time.sleep() 而非 await uasyncio.sleep()，會導致網路底層無法接收數據。🛠 快速上手確認已安裝 MicroPython 韌體於 ESP32。修改 config.py 中的 WIFI_PROFILES 與 MQTT_BROKER。上傳所有 .py 檔案與必要的 lib 資料夾至 ESP32。執行 main.py 並觀察終端機 (REPL) 輸出。透過 Web 介面或 MQTTX 進行功能測試。